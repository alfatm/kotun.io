(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5706],{51107:function(e,r,t){"use strict";t.d(r,{Z:function(){return g}});var n=t(63366),o=t(87462),i=t(67294),a=(t(45697),t(59864),t(86010)),c=t(71993),s=t(11496),l=t(33616),u=t(54801),d=t(87952),f=t(15773);function p(e){return(0,f.Z)("MuiAvatarGroup",e)}var h=(0,t(88858).Z)("MuiAvatarGroup",["root","avatar"]),x=t(85893);const v=["children","className","max","spacing","variant"],m={small:-16,medium:null},b=(0,s.ZP)("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,r)=>(0,o.Z)({[`& .${h.avatar}`]:r.avatar},r.root)})((({theme:e})=>({[`& .${u.Z.root}`]:{border:`2px solid ${e.palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"}))),y=(0,s.ZP)(d.Z,{name:"MuiAvatarGroup",slot:"Avatar",overridesResolver:(e,r)=>r.avatar})((({theme:e})=>({border:`2px solid ${e.palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}})));var g=i.forwardRef((function(e,r){const t=(0,l.Z)({props:e,name:"MuiAvatarGroup"}),{children:s,className:u,max:d=5,spacing:f="medium",variant:h="circular"}=t,g=(0,n.Z)(t,v),j=d<2?2:d,w=(0,o.Z)({},t,{max:d,spacing:f,variant:h}),Z=(e=>{const{classes:r}=e;return(0,c.Z)({root:["root"],avatar:["avatar"]},p,r)})(w),O=i.Children.toArray(s).filter((e=>i.isValidElement(e))),S=O.length>j?O.length-j+1:0,P=f&&void 0!==m[f]?m[f]:-f;return(0,x.jsxs)(b,(0,o.Z)({ownerState:w,className:(0,a.Z)(Z.root,u),ref:r},g,{children:[S?(0,x.jsxs)(y,{ownerState:w,className:Z.avatar,style:{marginLeft:P},variant:h,children:["+",S]}):null,O.slice(0,O.length-S).reverse().map((e=>i.cloneElement(e,{className:(0,a.Z)(e.props.className,Z.avatar),style:(0,o.Z)({marginLeft:P},e.props.style),variant:e.props.variant||h})))]}))}))},66242:function(e,r,t){"use strict";t.d(r,{Z:function(){return v}});var n=t(87462),o=t(63366),i=t(67294),a=(t(45697),t(86010)),c=t(71993),s=t(11496),l=t(33616),u=t(55113),d=t(15773);function f(e){return(0,d.Z)("MuiCard",e)}(0,t(88858).Z)("MuiCard",["root"]);var p=t(85893);const h=["className","raised"],x=(0,s.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({overflow:"hidden"})));var v=i.forwardRef((function(e,r){const t=(0,l.Z)({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=t,u=(0,o.Z)(t,h),d=(0,n.Z)({},t,{raised:s}),v=(e=>{const{classes:r}=e;return(0,c.Z)({root:["root"]},f,r)})(d);return(0,p.jsx)(x,(0,n.Z)({className:(0,a.Z)(v.root,i),elevation:s?8:void 0,ref:r,ownerState:d},u))}))},83965:function(e,r,t){"use strict";t.d(r,{Z:function(){return m}});var n=t(63366),o=t(87462),i=t(67294),a=(t(45697),t(86010)),c=t(71993),s=t(33616),l=t(11496),u=t(15773);function d(e){return(0,u.Z)("MuiCardMedia",e)}(0,t(88858).Z)("MuiCardMedia",["root","media","img"]);var f=t(85893);const p=["children","className","component","image","src","style"],h=(0,l.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e,{isMediaComponent:n,isImageComponent:o}=t;return[r.root,n&&r.media,o&&r.img]}})((({ownerState:e})=>(0,o.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"}))),x=["video","audio","picture","iframe","img"],v=["picture","img"];var m=i.forwardRef((function(e,r){const t=(0,s.Z)({props:e,name:"MuiCardMedia"}),{children:i,className:l,component:u="div",image:m,src:b,style:y}=t,g=(0,n.Z)(t,p),j=-1!==x.indexOf(u),w=!j&&m?(0,o.Z)({backgroundImage:`url("${m}")`},y):y,Z=(0,o.Z)({},t,{component:u,isMediaComponent:j,isImageComponent:-1!==v.indexOf(u)}),O=(e=>{const{classes:r,isMediaComponent:t,isImageComponent:n}=e,o={root:["root",t&&"media",n&&"img"]};return(0,c.Z)(o,d,r)})(Z);return(0,f.jsx)(h,(0,o.Z)({className:(0,a.Z)(O.root,l),as:u,role:!j&&m?"img":void 0,ref:r,style:w,ownerState:Z,src:j?m||b:void 0},g,{children:i}))}))},56849:function(e,r,t){"use strict";var n=t(67294),o=(t(45697),t(30067)),i=t(73633),a=t(57094),c=t(85893);function s(e){return e.substring(2).toLowerCase()}r.Z=function(e){const{children:r,disableReactTree:t=!1,mouseEvent:l="onClick",onClickAway:u,touchEvent:d="onTouchEnd"}=e,f=n.useRef(!1),p=n.useRef(null),h=n.useRef(!1),x=n.useRef(!1);n.useEffect((()=>(setTimeout((()=>{h.current=!0}),0),()=>{h.current=!1})),[]);const v=(0,o.Z)(r.ref,p),m=(0,i.Z)((e=>{const r=x.current;x.current=!1;const n=(0,a.Z)(p.current);if(!h.current||!p.current||"clientX"in e&&function(e,r){return r.documentElement.clientWidth<e.clientX||r.documentElement.clientHeight<e.clientY}(e,n))return;if(f.current)return void(f.current=!1);let o;o=e.composedPath?e.composedPath().indexOf(p.current)>-1:!n.documentElement.contains(e.target)||p.current.contains(e.target),o||!t&&r||u(e)})),b=e=>t=>{x.current=!0;const n=r.props[e];n&&n(t)},y={ref:v};return!1!==d&&(y[d]=b(d)),n.useEffect((()=>{if(!1!==d){const e=s(d),r=(0,a.Z)(p.current),t=()=>{f.current=!0};return r.addEventListener(e,m),r.addEventListener("touchmove",t),()=>{r.removeEventListener(e,m),r.removeEventListener("touchmove",t)}}}),[m,d]),!1!==l&&(y[l]=b(l)),n.useEffect((()=>{if(!1!==l){const e=s(l),r=(0,a.Z)(p.current);return r.addEventListener(e,m),()=>{r.removeEventListener(e,m)}}}),[m,l]),(0,c.jsx)(n.Fragment,{children:n.cloneElement(r,y)})}},33513:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/chat",function(){return t(39573)}])},62377:function(e,r,t){"use strict";t.d(r,{X:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,n.jsx)("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z",clipRule:"evenodd"})]}),"Archive")},75058:function(e,r,t){"use strict";t.d(r,{B:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})}),"DotsHorizontal")},28472:function(e,r,t){"use strict";t.d(r,{j:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M3 7a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 13a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"MenuAlt4")},3184:function(e,r,t){"use strict";t.d(r,{$:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),"PaperAirplane")},15658:function(e,r,t){"use strict";t.d(r,{F:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})}),"PaperClip")},1281:function(e,r,t){"use strict";t.d(r,{D:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"Photograph")},94453:function(e,r,t){"use strict";t.d(r,{v:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Plus")},99524:function(e,r,t){"use strict";t.d(r,{r:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Trash")},39573:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return lr}});var n=t(85893),o=t(67294),i=t(9008),a=t(11163),c=t(98396),s=t(87357),l=t(93946),u=t(87952),d=t(15861),f=t(11496),p=t(1998),h=t(26736),x=t(28520),v=t.n(x),m=t(67720),b=t(36743),y=t(42309),g=t(45697),j=t.n(g),w=t(50135),Z=t(87109),O=t(87918),S=t(56849),P=t(87406),k=t(55113),C=t(78462),R=t(9875),A=t(18987),E=t(59334),M=t(2644),I=t(32707),T=t(56807);function z(e,r,t,n,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,o)}function D(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function B(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){D(e,r,t[r])}))}return e}function H(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function L(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var W=function(e){var r,t=e.onAddRecipient,i=e.onRemoveRecipient,a=e.recipients,c=H(e,["onAddRecipient","onRemoveRecipient","recipients"]),l=(0,o.useRef)(null),f=(0,o.useState)(""),p=f[0],h=f[1],x=(0,o.useState)(!0),m=x[0],b=x[1],y=(0,o.useState)([]),g=y[0],j=y[1],D=function(e,r){var t=r.reduce((function(e,r){return L(e).concat([r.id])}),[]);return e.filter((function(e){return!t.includes(e.id)}))}(g,a),W=p&&m,N=(r=v().mark((function e(r){var t,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=r.target.value,h(t),!t){e.next=10;break}return e.next=6,M.x.getContacts(t);case 6:n=e.sent,j(n),e.next=11;break;case 10:j([]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){z(i,n,o,a,c,"next",e)}function c(e){z(i,n,o,a,c,"throw",e)}a(void 0)}))});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,B({sx:{borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1}},c,{children:(0,n.jsx)(T.L,{children:(0,n.jsxs)(s.Z,{sx:{alignItems:"center",display:"flex",p:2},children:[(0,n.jsx)(s.Z,{ref:l,sx:{alignItems:"center",display:"flex",mr:1,"& .MuiInputBase-root":{backgroundColor:"background.paper",height:40,minWidth:260}},children:(0,n.jsx)(w.Z,{fullWidth:!0,onBlur:function(){W||b(!1)},onChange:N,onFocus:function(){b(!0)},placeholder:"Search contacts",InputProps:{startAdornment:(0,n.jsx)(Z.Z,{position:"start",children:(0,n.jsx)(I.o,{fontSize:"small"})})},value:p})}),(0,n.jsx)(d.Z,{color:"textSecondary",sx:{mr:2},variant:"body2",children:"To:"}),a.reverse().map((function(e){return(0,n.jsx)(O.Z,{avatar:(0,n.jsx)(u.Z,{src:e.avatar}),label:e.name,onDelete:function(){return r=e.id,void(i&&i(r));var r},sx:{mr:2}},e.id)}))]})})})),W&&(0,n.jsx)(S.Z,{onClickAway:function(){b(!1)},children:(0,n.jsx)(P.Z,{anchorEl:null===l||void 0===l?void 0:l.current,open:m,placement:"bottom-start",children:(0,n.jsx)(k.Z,{elevation:16,sx:{borderColor:"divider",borderStyle:"solid",borderWidth:1,maxWidth:"100%",mt:1,width:320},children:0===D.length?(0,n.jsxs)(s.Z,{sx:{p:2,textAlign:"center"},children:[(0,n.jsx)(d.Z,{gutterBottom:!0,variant:"h6",children:"Nothing Found"}),(0,n.jsxs)(d.Z,{color:"textSecondary",variant:"body2",children:["We couldn't find any matches for \"",p,'". Try checking for typos or using complete words.']})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{sx:{px:2,pt:2},children:(0,n.jsx)(d.Z,{color:"textSecondary",variant:"subtitle2",children:"Contacts"})}),(0,n.jsx)(C.Z,{children:D.map((function(e){return(0,n.jsxs)(R.ZP,{button:!0,onClick:function(){return r=e,h(""),void(t&&t(r));var r},children:[(0,n.jsx)(A.Z,{children:(0,n.jsx)(u.Z,{src:e.avatar})}),(0,n.jsx)(E.Z,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)}))})]})})})})]})};W.propTypes={onAddRecipient:j().func,onRemoveRecipient:j().func,recipients:j().array},W.defaultProps={recipients:[]};var N=t(30479),G=t(3184),F=t(1281),V=t(15658);function X(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var q=function(e){var r=e.disabled,t=e.onSend,i=_(e,["disabled","onSend"]),a=(0,o.useRef)(null),c=(0,o.useState)(""),d=c[0],f=c[1],p=function(){a.current.click()},h=function(){d&&(null===t||void 0===t||t(d),f(""))};return(0,n.jsxs)(s.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){X(e,r,t[r])}))}return e}({sx:{alignItems:"center",backgroundColor:"background.paper",display:"flex",flexShrink:0,p:3}},i,{children:[(0,n.jsx)(u.Z,{sx:{display:{xs:"none",sm:"inline"},mr:2},src:"/static/mock-images/avatars/avatar-anika_visser.png"}),(0,n.jsx)(w.Z,{disabled:r,fullWidth:!0,onChange:function(e){f(e.target.value)},onKeyUp:function(e){"Enter"===e.code&&h()},placeholder:"Leave a message",value:d,size:"small"}),(0,n.jsxs)(s.Z,{sx:{alignItems:"center",display:"flex",m:-2,ml:2},children:[(0,n.jsx)(N.Z,{title:"Send",children:(0,n.jsx)(s.Z,{sx:{m:1},children:(0,n.jsx)(l.Z,{color:"primary",disabled:!d||r,sx:{backgroundColor:"primary.main",color:"primary.contrastText","&:hover":{backgroundColor:"primary.dark"}},onClick:h,children:(0,n.jsx)(G.$,{fontSize:"small"})})})}),(0,n.jsx)(N.Z,{title:"Attach photo",children:(0,n.jsx)(s.Z,{sx:{display:{xs:"none",sm:"inline-flex"},m:1},children:(0,n.jsx)(l.Z,{disabled:r,edge:"end",onClick:p,children:(0,n.jsx)(F.D,{fontSize:"small"})})})}),(0,n.jsx)(N.Z,{title:"Attach file",children:(0,n.jsx)(s.Z,{sx:{display:{xs:"none",sm:"inline-flex"},m:1},children:(0,n.jsx)(l.Z,{disabled:r,edge:"end",onClick:p,children:(0,n.jsx)(V.F,{fontSize:"small"})})})})]}),(0,n.jsx)("input",{hidden:!0,ref:a,type:"file"})]}))};function K(e,r,t,n,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,o)}function $(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Y(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}q.propTypes={disabled:j().bool,onSend:j().func},q.defaultProps={disabled:!1};var U=function(e){var r,t=(0,y.I0)(),i=(0,a.useRouter)(),c=(0,o.useState)([]),l=c[0],u=c[1],d=(r=v().mark((function e(r){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t((0,b.Hz)({recipientIds:l.map((function(e){return e.id})),body:r}));case 3:n=e.sent,i.push("/dashboard/chat?threadKey=".concat(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){K(i,n,o,a,c,"next",e)}function c(e){K(i,n,o,a,c,"throw",e)}a(void 0)}))});return(0,n.jsxs)(s.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){$(e,r,t[r])}))}return e}({sx:{display:"flex",flexDirection:"column",flexGrow:1}},e,{children:[(0,n.jsx)(W,{onAddRecipient:function(e){u((function(r){return r.find((function(r){return r.id===e.id}))?l:Y(l).concat([e])}))},onRemoveRecipient:function(e){u((function(r){return r.filter((function(r){return r.id!==e}))}))},recipients:l}),(0,n.jsx)(s.Z,{sx:{backgroundColor:"background.default",flexGrow:1}}),(0,n.jsx)(m.Z,{}),(0,n.jsx)(q,{disabled:0===l.length,onSend:d})]}))},J=t(41664),Q=t(77533),ee=t(11057),re=t(94453),te=t(66661),ne=t(19929);function oe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ie(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){oe(e,r,t[r])}))}return e}function ae(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var ce=(0,o.forwardRef)((function(e,r){var t=e.isFocused,o=e.onChange,i=e.onClickAway,a=e.onFocus,c=e.onSelect,l=e.query,f=e.results,p=ae(e,["isFocused","onChange","onClickAway","onFocus","onSelect","query","results"]),h=l&&t;return(0,n.jsx)(S.Z,{onClickAway:i,children:(0,n.jsxs)(s.Z,ie({ref:r,sx:{p:2}},p,{children:[(0,n.jsx)(w.Z,{fullWidth:!0,onChange:o,onFocus:a,placeholder:"Search contacts",InputProps:{startAdornment:(0,n.jsx)(Z.Z,{position:"start",children:(0,n.jsx)(I.o,{fontSize:"small"})})},value:l}),t&&!l&&(0,n.jsx)(s.Z,{sx:{py:2},children:(0,n.jsx)(ne.C,{message:"Enter a contact name"})}),h&&0===f.length&&(0,n.jsx)(s.Z,{sx:{py:2},children:(0,n.jsxs)(d.Z,{color:"textSecondary",variant:"body2",children:["We couldn't find any matches for \"",l,'". Try checking for typos or using complete words.']})}),h&&f.length>0&&(0,n.jsxs)(s.Z,{sx:{py:2},children:[(0,n.jsx)(d.Z,{color:"textSecondary",variant:"subtitle2",children:"Contacts"}),(0,n.jsx)(C.Z,{children:f.map((function(e){return(0,n.jsxs)(R.ZP,{button:!0,onClick:function(){return function(e){c&&c(e)}(e)},children:[(0,n.jsx)(A.Z,{children:(0,n.jsx)(u.Z,{src:e.avatar,sx:{height:32,width:32}})}),(0,n.jsx)(E.Z,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)}))})]})]}))})}));ce.propTypes={isFocused:j().bool,onChange:j().func,onClickAway:j().func,onFocus:j().func,onSelect:j().func,query:j().string,results:j().array},ce.defaultProps={isFocused:!1,query:"",results:[]};var se=t(12195),le=t(35077),ue=t(51107);function de(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function fe(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){de(e,r,t[r])}))}return e}function pe(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function he(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var xe={lessThanXSeconds:"{{count}}s",xSeconds:"{{count}}s",halfAMinute:"30s",lessThanXMinutes:"{{count}}m",xMinutes:"{{count}}m",aboutXHours:"{{count}}h",xHours:"{{count}}h",xDays:"{{count}}d",aboutXWeeks:"{{count}}w",xWeeks:"{{count}}w",aboutXMonths:"{{count}}m",xMonths:"{{count}}m",aboutXYears:"{{count}}y",xYears:"{{count}}y",overXYears:"{{count}}y",almostXYears:"{{count}}y"},ve=function(e,r,t){t=t||{};var n=xe[e].replace("{{count}}",r);return t.addSuffix?t.comparison>0?"in "+n:n+" ago":n},me=function(e){var r=e.active,t=e.thread,o=e.onSelect,i=pe(e,["active","thread","onSelect"]),a="5e86809283e28b96d2d38537",c=t.participants.filter((function(e){return e.id!==a})),l=t.messages[t.messages.length-1],f=c.reduce((function(e,r){return he(e).concat([r.name])}),[]).join(", "),p="";if(l){var h=l.authorId===a?"Me: ":"",x="image"===l.contentType?"Sent a photo":l.body;p="".concat(h).concat(x)}return(0,n.jsxs)(R.ZP,fe({disableGutters:!0,disablePadding:!0,divider:!0,onClick:o,sx:{backgroundColor:r&&"action.selected",cursor:"pointer",overflow:"hidden",px:2,py:3}},i,{children:[(0,n.jsx)(A.Z,{sx:{display:"flex",justifyContent:{sm:"flex-start",xs:"center"}},children:(0,n.jsx)(ue.Z,{max:2,sx:{"& .MuiAvatar-root":c.length>1?{height:26,width:26,"&:nth-of-type(2)":{mt:"10px"}}:{height:36,width:36}},children:c.map((function(e){return(0,n.jsx)(u.Z,{src:e.avatar},e.id)}))})}),(0,n.jsxs)(s.Z,{sx:{flexGrow:1,mr:2,overflow:"hidden"},children:[(0,n.jsx)(d.Z,{noWrap:!0,variant:"subtitle2",children:f}),(0,n.jsxs)(s.Z,{sx:{alignItems:"center",display:"flex"},children:[t.unreadCount>0&&(0,n.jsx)(s.Z,{sx:{backgroundColor:"primary.main",borderRadius:"50%",height:8,mr:1,width:8}}),(0,n.jsx)(d.Z,{color:"textSecondary",noWrap:!0,sx:{flexGrow:1},variant:"subtitle2",children:p})]})]}),(0,n.jsx)(d.Z,{color:"textSecondary",sx:{whiteSpace:"nowrap"},variant:"caption",children:(0,se.Z)(l.createdAt,new Date,{addSuffix:!1,locale:fe({},le.Z,{formatDistance:ve})})})]}))};function be(e,r,t,n,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,o)}function ye(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ge(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){ye(e,r,t[r])}))}return e}function je(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}me.propTypes={active:j().bool,onSelect:j().func,thread:j().object.isRequired},me.defaultProps={active:!1};var we=(0,f.ZP)(Q.ZP)({flexShrink:0,width:380,"& .MuiDrawer-paper":{position:"relative",width:380}}),Ze=(0,f.ZP)(Q.ZP)({maxWidth:"100%",width:380,"& .MuiDrawer-paper":{height:"calc(100% - 64px)",maxWidth:"100%",top:64,width:380}}),Oe=function(e){var r,t=e.containerRef,i=e.onClose,u=e.open,f=je(e,["containerRef","onClose","open"]),p=(0,a.useRouter)(),h=(0,y.v9)((function(e){return e.chat})),x=h.threads,m=h.activeThreadId,b=(0,o.useState)(!1),g=b[0],j=b[1],w=(0,o.useState)(""),Z=w[0],O=w[1],S=(0,o.useState)([]),P=S[0],k=S[1],R=(0,c.Z)((function(e){return e.breakpoints.up("md")})),A=(r=v().mark((function e(r){var t,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=r.target.value,O(t),!t){e.next=10;break}return e.next=6,M.x.getContacts(t);case 6:n=e.sent,k(n),e.next=11;break;case 10:k([]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){be(i,n,o,a,c,"next",e)}function c(e){be(i,n,o,a,c,"throw",e)}a(void 0)}))}),E=(0,n.jsxs)("div",{children:[(0,n.jsxs)(s.Z,{sx:{alignItems:"center",display:"flex",p:2},children:[(0,n.jsx)(d.Z,{variant:"h5",children:"Chats"}),(0,n.jsx)(s.Z,{sx:{flexGrow:1}}),(0,n.jsx)(J.default,{href:"/dashboard/chat?compose=true",passHref:!0,children:(0,n.jsx)(ee.Z,{component:"a",onClick:function(){R||null===i||void 0===i||i()},startIcon:(0,n.jsx)(re.v,{}),variant:"contained",children:"Group"})}),(0,n.jsx)(l.Z,{onClick:i,sx:{display:{sm:"none"},ml:2},children:(0,n.jsx)(te.X,{fontSize:"small"})})]}),(0,n.jsx)(ce,{isFocused:g,onChange:A,onClickAway:function(){j(!1),O("")},onFocus:function(){j(!0)},onSelect:function(e){j(!1),O(""),R||null===i||void 0===i||i(),p.push("/dashboard/chat?threadKey=".concat(e.id))},query:Z,results:P}),(0,n.jsx)(s.Z,{sx:{borderTopColor:"divider",borderTopStyle:"solid",borderTopWidth:1,display:g?"none":"block"},children:(0,n.jsx)(T.L,{children:(0,n.jsx)(C.Z,{disablePadding:!0,children:x.allIds.map((function(e){return(0,n.jsx)(me,{active:m===e,onSelect:function(){return function(e){var r,t=x.byId[e];r="GROUP"===t.type?t.id:t.participantIds.find((function(e){return"5e86809283e28b96d2d38537"!==e})),R||null===i||void 0===i||i(),p.push("/dashboard/chat?threadKey=".concat(r))}(e)},thread:x.byId[e]},e)}))})})})]});return R?(0,n.jsx)(we,ge({anchor:"left",open:u,SlideProps:{container:null===t||void 0===t?void 0:t.current},variant:"persistent"},f,{children:E})):(0,n.jsx)(Ze,ge({anchor:"left",ModalProps:{container:null===t||void 0===t?void 0:t.current},onClose:i,open:u,SlideProps:{container:null===t||void 0===t?void 0:t.current},variant:"temporary"},f,{children:E}))};Oe.propTypes={containerRef:j().any,onClose:j().func,open:j().bool};var Se=t(44086),Pe=t(66242),ke=t(50122),Ce=t(83965);function Re(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ae(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var Ee=function(e){var r=e.body,t=e.contentType,i=e.createdAt,a=e.authorAvatar,c=e.authorName,l=e.authorType,f=Ae(e,["body","contentType","createdAt","authorAvatar","authorName","authorType"]),p=(0,o.useState)(!1),h=(p[0],p[1]);return(0,n.jsxs)(s.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){Re(e,r,t[r])}))}return e}({sx:{display:"flex",flexDirection:"user"===l?"row-reverse":"row",maxWidth:500,ml:"user"===l?"auto":0,mb:2}},f,{children:[(0,n.jsx)(u.Z,{src:a,sx:{height:32,ml:"user"===l?2:0,mr:"user"===l?0:2,width:32}}),(0,n.jsxs)(s.Z,{sx:{flexGrow:1},children:[(0,n.jsxs)(Pe.Z,{sx:{backgroundColor:"user"===l?"primary.main":"background.paper",color:"user"===l?"primary.contrastText":"text.primary",px:2,py:1},children:[(0,n.jsx)(s.Z,{sx:{mb:1},children:(0,n.jsx)(ke.Z,{color:"inherit",sx:{cursor:"pointer"},variant:"subtitle2",children:c})}),"image"===t?(0,n.jsx)(Ce.Z,{onClick:function(){return h(!0)},image:r,sx:{height:200}}):(0,n.jsx)(d.Z,{color:"inherit",variant:"body1",children:r})]}),(0,n.jsx)(s.Z,{sx:{display:"flex",justifyContent:"user"===l?"flex-end":"flex-start",mt:1,px:2},children:(0,n.jsxs)(d.Z,{color:"textSecondary",noWrap:!0,variant:"caption",children:[(0,Se.Z)(i)," ","ago"]})})]})]}))};function Me(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ie(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}Ee.propTypes={authorAvatar:j().string.isRequired,authorName:j().string.isRequired,authorType:j().oneOf(["contact","user"]),body:j().string.isRequired,contentType:j().string.isRequired,createdAt:j().number.isRequired};var Te=function(e){var r=e.messages,t=e.participants,o=Ie(e,["messages","participants"]),i="/static/mock-images/avatars/avatar-anika_visser.png";return(0,n.jsx)(s.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){Me(e,r,t[r])}))}return e}({sx:{p:2}},o,{children:r.map((function(e){var r,o,a,c=t.find((function(r){return r.id===e.authorId}));return"5e86809283e28b96d2d38537"===e.authorId?(r=i,o="Me",a="user"):(r=c.avatar,o=c.name,a="contact"),(0,n.jsx)(Ee,{authorAvatar:r,authorName:o,authorType:a,body:e.body,contentType:e.contentType,createdAt:e.createdAt},e.id)}))}))};Te.propTypes={messages:j().array,participants:j().array};var ze=t(25464),De=t(18972),Be=t(48885),He=t(62377),Le=t(83709),We=t(82066),Ne=(0,We.Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),"Ban"),Ge=(0,We.Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Camera"),Fe=(0,We.Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})}),"Phone"),Ve=t(75058),Xe=t(99524);function _e(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function qe(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){_e(e,r,t[r])}))}return e}function Ke(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function $e(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ye=function(e){var r=e.participants,t=Ke(e,["participants"]),i=(0,o.useRef)(null),a=(0,o.useState)(!1),c=a[0],f=a[1],p="5e86809283e28b96d2d38537",h=r.filter((function(e){return e.id!==p})),x=h.reduce((function(e,r){return $e(e).concat([r.name])}),[]).join(", ");return(0,n.jsxs)(s.Z,qe({sx:{alignItems:"center",backgroundColor:"background.paper",borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1,display:"flex",flexShrink:0,minHeight:64,px:2,py:1}},t,{children:[(0,n.jsxs)(s.Z,{sx:{alignItems:"center",display:"flex"},children:[(0,n.jsx)(ue.Z,{max:2,sx:qe({},h.length>1&&{"& .MuiAvatar-root":{height:30,width:30,"&:nth-of-type(2)":{mt:"10px"}}}),children:h.map((function(e){return(0,n.jsx)(u.Z,{src:e.avatar},e.id)}))}),(0,n.jsxs)(s.Z,{sx:{ml:2},children:[(0,n.jsx)(d.Z,{variant:"subtitle2",children:x}),1===h.length&&(0,n.jsxs)(d.Z,{color:"textSecondary",variant:"caption",children:["Last active"," ",(0,Se.Z)(h[0].lastActivity,{addSuffix:!0})]})]})]}),(0,n.jsx)(s.Z,{sx:{flexGrow:1}}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(Fe,{fontSize:"small"})}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(Ge,{fontSize:"small"})}),(0,n.jsx)(N.Z,{title:"More options",children:(0,n.jsx)(l.Z,{onClick:function(){f(!0)},ref:i,children:(0,n.jsx)(Ve.B,{fontSize:"small"})})}),(0,n.jsxs)(ze.Z,{anchorEl:i.current,keepMounted:!0,onClose:function(){f(!1)},open:c,children:[(0,n.jsxs)(De.Z,{children:[(0,n.jsx)(Be.Z,{children:(0,n.jsx)(Ne,{fontSize:"small"})}),(0,n.jsx)(E.Z,{primary:"Block contact"})]}),(0,n.jsxs)(De.Z,{children:[(0,n.jsx)(Be.Z,{children:(0,n.jsx)(Xe.r,{fontSize:"small"})}),(0,n.jsx)(E.Z,{primary:"Delete thread"})]}),(0,n.jsxs)(De.Z,{children:[(0,n.jsx)(Be.Z,{children:(0,n.jsx)(He.X,{fontSize:"small"})}),(0,n.jsx)(E.Z,{primary:"Archive thread"})]}),(0,n.jsxs)(De.Z,{children:[(0,n.jsx)(Be.Z,{children:(0,n.jsx)(Le.U,{fontSize:"small"})}),(0,n.jsx)(E.Z,{primary:"Mute notifications"})]})]})]}))};function Ue(e,r,t,n,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,o)}function Je(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var i=e.apply(r,t);function a(e){Ue(i,n,o,a,c,"next",e)}function c(e){Ue(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Qe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Ye.propTypes={participants:j().array},Ye.defaultProps={participants:[]};var er=function(e){var r=e.threadKey,t=(0,y.I0)(),i=(0,a.useRouter)(),c=(0,y.v9)((function(e){return function(e){var r=e.chat,t=r.threads,n=r.activeThreadId;return t.byId[n]}(e)})),l=(0,o.useRef)(null),u=(0,o.useState)([]),d=u[0],f=u[1],p="5e86809283e28b96d2d38537",h=Je(v().mark((function e(){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.x.getParticipants(r);case 3:return n=e.sent,f(n),e.next=7,t((0,b.bJ)(r));case 7:o=e.sent,t((0,b.gG)(o)),t((0,b.RZ)(o)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),i.push("/dashboard/chat");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));(0,o.useEffect)((function(){h()}),[r]),(0,o.useEffect)((function(){(null===c||void 0===c?void 0:c.messages)&&(null===l||void 0===l?void 0:l.current)&&(l.current.getScrollElement().scrollTop=l.current.el.scrollHeight)}),[c]);var x=Je(v().mark((function e(r){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!c){e.next=6;break}return e.next=4,t((0,b.Hz)({threadId:c.id,body:r}));case 4:e.next=13;break;case 6:return n=d.filter((function(e){return e.id!==p})).map((function(e){return e.id})),e.next=9,t((0,b.Hz)({recipientIds:n,body:r}));case 9:return o=e.sent,e.next=12,t((0,b.bJ)(o));case 12:t((0,b.gG)(o));case 13:(null===l||void 0===l?void 0:l.current)&&l.current.getScrollElement().scrollTo({top:l.current.el.scrollHeight,behavior:"smooth"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return(0,n.jsxs)(s.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){Qe(e,r,t[r])}))}return e}({sx:{display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"}},e,{children:[(0,n.jsx)(Ye,{participants:d}),(0,n.jsx)(s.Z,{sx:{backgroundColor:"background.default",flexGrow:1,overflow:"hidden"},children:(0,n.jsx)(T.L,{ref:l,sx:{maxHeight:"100%"},children:(0,n.jsx)(Te,{messages:(null===c||void 0===c?void 0:c.messages)||[],participants:(null===c||void 0===c?void 0:c.participants)||[]})})}),(0,n.jsx)(m.Z,{}),(0,n.jsx)(q,{disabled:!1,onSend:x})]}))};er.propTypes={threadKey:j().string.isRequired};var rr,tr,nr=t(54585),or=t(28472),ir=t(59084);function ar(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var cr=(0,f.ZP)("div",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var r=e.theme,t=e.open;return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){ar(e,r,t[r])}))}return e}((ar(rr={display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"},r.breakpoints.up("md"),{marginLeft:-380}),ar(rr,"transition",r.transitions.create("margin",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen})),rr),t&&(ar(tr={},r.breakpoints.up("md"),{marginLeft:0}),ar(tr,"transition",r.transitions.create("margin",{easing:r.transitions.easing.easeOut,duration:r.transitions.duration.enteringScreen})),tr))})),sr=function(){var e=(0,a.useRouter)(),r=(0,y.I0)(),t=(0,o.useRef)(null),f=(0,o.useState)(!0),p=f[0],h=f[1],x="true"===e.query.compose,v=e.query.threadKey,m=(0,c.Z)((function(e){return e.breakpoints.up("md")}),{noSsr:!0});(0,o.useEffect)((function(){ir.w.push({event:"page_view"})}),[]),(0,o.useEffect)((function(){r((0,b.hr)())}),[]),(0,o.useEffect)((function(){h(!!m)}),[m]);if(!e.isReady)return null;var g=v?"thread":x?"compose":"blank";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.default,{children:(0,n.jsx)("title",{children:"Dashboard: Chat | Material Kit Pro"})}),(0,n.jsx)(s.Z,{component:"main",sx:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},children:(0,n.jsxs)(s.Z,{ref:t,sx:{display:"flex",position:"absolute",top:0,right:0,bottom:0,left:0},children:[(0,n.jsx)(Oe,{containerRef:t,onClose:function(){h(!1)},open:p}),(0,n.jsxs)(cr,{open:p,children:[(0,n.jsx)(s.Z,{sx:{alignItems:"center",backgroundColor:"background.paper",borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1,display:"flex",p:2},children:(0,n.jsx)(l.Z,{onClick:function(){h((function(e){return!e}))},children:(0,n.jsx)(or.j,{fontSize:"small"})})}),"thread"===g&&(0,n.jsx)(er,{threadKey:v}),"compose"===g&&(0,n.jsx)(U,{}),"blank"===g&&(0,n.jsxs)(s.Z,{sx:{alignItems:"center",display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[(0,n.jsx)(u.Z,{sx:{backgroundColor:"primary.main",color:"primary.contrastText",height:56,width:56},children:(0,n.jsx)(nr.d,{fontSize:"small"})}),(0,n.jsx)(d.Z,{color:"textSecondary",sx:{mt:2},variant:"subtitle1",children:"Start meaningful conversations!"})]})]})]})})]})};sr.getLayout=function(e){return(0,n.jsx)(p.a,{children:(0,n.jsx)(h.c,{children:e})})};var lr=sr}},function(e){e.O(0,[2180,5464,2169,135,7637,8005,8619,7521,2719,9764,9774,2888,179],(function(){return r=33513,e(e.s=r);var r}));var r=e.O();_N_E=r}]);